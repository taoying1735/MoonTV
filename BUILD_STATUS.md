# MoonTV æ„å»ºçŠ¶æ€æŠ¥å‘Š

## å½“å‰çŠ¶æ€
**çŠ¶æ€**: ğŸŸ¡ ç¬¬ä¹æ¬¡æ„å»ºè¿›è¡Œä¸­  
**æ—¶é—´**: 2025-01-27 21:32:04  
**Node.jsç‰ˆæœ¬**: v20.18.0 (npm 10.8.2)  
**å½“å‰é˜¶æ®µ**: npm install è¿›è¡Œä¸­...

## ç¬¬ä¹æ¬¡æ„å»ºå°è¯• - 2025-01-27 21:32

### æ„å»ºä¿¡æ¯
- **å¼€å§‹æ—¶é—´**: 21:32:04.949
- **æ„å»ºå™¨ç‰ˆæœ¬**: 20250704
- **å…‹éš†æ—¶é—´**: 2438ms âœ… (æ€§èƒ½ä¼˜åŒ–)
- **Node.jsç‰ˆæœ¬**: v20.18.0 (npm 10.8.2) âœ…
- **å½“å‰é˜¶æ®µ**: npm install è¿›è¡Œä¸­...

### é¢„æœŸæ”¹è¿›
åŸºäºä¹‹å‰çš„ä¿®å¤ï¼Œè¿™æ¬¡æ„å»ºåº”è¯¥ï¼š
1. âœ… npm install æˆåŠŸå®Œæˆï¼ˆHusky è·³è¿‡æœºåˆ¶å·²ä¿®å¤ï¼‰
2. âœ… ä½¿ç”¨æ­£ç¡®çš„ npm run build å‘½ä»¤
3. âœ… tailwindcss ç­‰ä¾èµ–åº”è¯¥å¯ä»¥æ­£ç¡®è®¿é—®
4. âœ… è·¯å¾„åˆ«åé—®é¢˜åº”è¯¥å¾—åˆ°è§£å†³

## æœ€æ–°é”™è¯¯åˆ†æ (21:06:29)
```
error: cannot find module 'tailwindcss'
module not found: can't resolve '@/lib/auth'
module not found: can't resolve '@/components/pagelayout'
```

**é—®é¢˜åˆ†æ**:
1. **åŒ…ç®¡ç†å™¨ä¸ä¸€è‡´**: ä½¿ç”¨ `npm install` ä½†æ„å»ºå‘½ä»¤æ˜¯ `pnpm build`
2. **ä¾èµ–ä½ç½®é”™è¯¯**: `tailwindcss`ã€`postcss`ã€`autoprefixer` åœ¨ `devDependencies` ä¸­ï¼Œæ„å»ºæ—¶æ— æ³•è®¿é—®
3. **è·¯å¾„åˆ«åé—®é¢˜**: `@/` è·¯å¾„åˆ«åæ— æ³•è§£æ

## å·²å®æ–½çš„ä¿®å¤æªæ–½

### 1. ä¿®å¤åŒ…ç®¡ç†å™¨å…¼å®¹æ€§é—®é¢˜ âœ…
- **é—®é¢˜**: build è„šæœ¬ä½¿ç”¨ pnpm å‘½ä»¤ï¼Œä½†éƒ¨ç½²ç¯å¢ƒä½¿ç”¨ npm
- **è§£å†³æ–¹æ¡ˆ**: ä¿®æ”¹ package.json ä¸­çš„ build è„šæœ¬
- **ä¿®æ”¹å‰**: `"build": "node scripts/convert-config.js && node scripts/generate-manifest.js && next build"`
- **ä¿®æ”¹å**: `"build": "npm run gen:runtime && npm run gen:manifest && next build"`

### 2. ä¿®å¤ "self is not defined" é”™è¯¯ âœ…
- **é—®é¢˜**: å®¢æˆ·ç«¯ä»£ç åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œæ—¶å¼•ç”¨æµè§ˆå™¨ç‰¹æœ‰çš„å…¨å±€å˜é‡
- **è§£å†³æ–¹æ¡ˆ**: åœ¨ next.config.js çš„ webpack é…ç½®ä¸­æ·»åŠ å…¨å±€å˜é‡å®šä¹‰

### 3. ä¿®å¤ Husky å®‰è£…é”™è¯¯ âœ…
- **é—®é¢˜**: `prepare` è„šæœ¬åœ¨éƒ¨ç½²ç¯å¢ƒä¸­æ— æ³•æ‰¾åˆ° husky å‘½ä»¤
- **è§£å†³æ–¹æ¡ˆ**: ä¿®æ”¹ prepare è„šæœ¬ï¼Œä½¿å…¶åœ¨ husky ä¸å¯ç”¨æ—¶ä¼˜é›…åœ°è·³è¿‡
- **ä¿®æ”¹å‰**: `"prepare": "husky install"`
- **ä¿®æ”¹å**: `"prepare": "node -e \"try { require('husky').install() } catch (e) { console.log('Husky not available, skipping...') }\""`

### 4. ä¿®å¤ Beasties ç‰ˆæœ¬é”™è¯¯ âœ…
- **é—®é¢˜**: `beasties@^0.0.25` ç‰ˆæœ¬ä¸å­˜åœ¨
- **è§£å†³æ–¹æ¡ˆ**: ä½¿ç”¨æ­£ç¡®çš„ç‰ˆæœ¬å· `0.1.0`
- **ä¿®æ”¹å‰**: `"beasties": "^0.0.25"`
- **ä¿®æ”¹å**: `"beasties": "^0.1.0"`

### 5. ä¿®å¤åŒ…ç®¡ç†å™¨ä¸ä¸€è‡´é—®é¢˜ ğŸ†•
- **é—®é¢˜**: å®‰è£…å‘½ä»¤ä½¿ç”¨ `npm install`ï¼Œä½†æ„å»ºå‘½ä»¤ä½¿ç”¨ `pnpm build`
- **è§£å†³æ–¹æ¡ˆ**: ç»Ÿä¸€ä½¿ç”¨ npm å‘½ä»¤
- **ä¿®æ”¹å‰**: `"build": "npm run gen:runtime && npm run gen:manifest && next build"`
- **ä¿®æ”¹å**: ä¿æŒä½¿ç”¨ npm run å‘½ä»¤ï¼Œç¡®ä¿ä¸€è‡´æ€§

### 6. ä¿®å¤æ„å»ºä¾èµ–é…ç½®é—®é¢˜ ğŸ†•
- **é—®é¢˜**: `tailwindcss`ã€`postcss`ã€`autoprefixer` åœ¨ `devDependencies` ä¸­ï¼Œæ„å»ºæ—¶æ— æ³•è®¿é—®
- **è§£å†³æ–¹æ¡ˆ**: å°†æ„å»ºå¿…éœ€çš„ä¾èµ–ç§»åŠ¨åˆ° `dependencies` ä¸­
- **ç§»åŠ¨çš„åŒ…**:
  - `tailwindcss`: `^3.4.17`
  - `postcss`: `^8.5.1`
  - `autoprefixer`: `^10.4.20`

## æ­£ç¡®çš„éƒ¨ç½²é…ç½®

### æ¨èé…ç½®:
- **æ¡†æ¶é¢„è®¾**: Next âœ…
- **æ ¹ç›®å½•**: ./ âœ…
- **è¾“å‡ºç›®å½•**: æœªè®¾ç½® âœ… (Next.js é»˜è®¤è¾“å‡ºåˆ° `.next`)
- **ç¼–è¯‘å‘½ä»¤**: `npm run build` âœ… (ä¿®æ­£å)
- **å®‰è£…å‘½ä»¤**: `npm install` âœ…

### é”™è¯¯é…ç½® (ä¹‹å‰):
- **ç¼–è¯‘å‘½ä»¤**: `pnpm build` âŒ (åŒ…ç®¡ç†å™¨ä¸ä¸€è‡´)

## é¢„æœŸç»“æœ
1. âœ… npm install åº”è¯¥æˆåŠŸå®Œæˆ
2. âœ… npm run build åº”è¯¥æˆåŠŸæ‰§è¡Œ
3. âœ… tailwindcss ç­‰æ„å»ºä¾èµ–åº”è¯¥å¯ä»¥æ­£ç¡®è®¿é—®
4. âœ… è·¯å¾„åˆ«å @/ åº”è¯¥æ­£ç¡®è§£æ
5. âœ… Next.js æ„å»ºåº”è¯¥æˆåŠŸå®Œæˆ

## æ„å»ºå†å²
- **ç¬¬ä¸€æ¬¡**: pnpm å‘½ä»¤æœªæ‰¾åˆ° â†’ å·²ä¿®å¤
- **ç¬¬äºŒæ¬¡**: self is not defined é”™è¯¯ â†’ å·²ä¿®å¤  
- **ç¬¬ä¸‰æ¬¡**: husky å‘½ä»¤æœªæ‰¾åˆ° â†’ å·²ä¿®å¤
- **ç¬¬å››æ¬¡**: beasties ç‰ˆæœ¬ä¸å­˜åœ¨ â†’ å·²ä¿®å¤
- **ç¬¬äº”æ¬¡**: åŒ…ç®¡ç†å™¨ä¸ä¸€è‡´ + ä¾èµ–é…ç½®é”™è¯¯ â†’ å·²ä¿®å¤

## ä¸‹ä¸€æ­¥
ç­‰å¾…æ–°çš„æ„å»ºå°è¯•ï¼ŒéªŒè¯æ‰€æœ‰ä¿®å¤æªæ–½çš„æ•ˆæœ