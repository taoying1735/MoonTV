2025-07-26T06:15:29.354737838Z Cloning repository...
2025-07-26T06:15:30.058402112Z From https://github.com/taoying1735/MoonTV
2025-07-26T06:15:30.058575138Z * branch 58f08335c081047b94b012bcbd8d1265699daa79 -> FETCH_HEAD
2025-07-26T06:15:30.058703154Z
2025-07-26T06:15:30.107691352Z HEAD is now at 58f0833 optimize: reduce deployment size for Cloudflare Pages
2025-07-26T06:15:30.108053618Z
2025-07-26T06:15:30.215799569Z
2025-07-26T06:15:30.215837481Z Using v2 root directory strategy
2025-07-26T06:15:30.233768962Z Success: Finished cloning repository files
2025-07-26T06:15:32.078272179Z Checking for configuration in a Wrangler configuration file (BETA)
2025-07-26T06:15:32.078777026Z
2025-07-26T06:15:33.180248951Z No wrangler.toml file found. Continuing.
2025-07-26T06:15:33.257141848Z Detected the following tools from environment: nodejs@20.10.0, pnpm@10.11.1
2025-07-26T06:15:33.257589384Z Installing nodejs 20.10.0
2025-07-26T06:15:34.319912303Z Trying to update node-build... ok
2025-07-26T06:15:34.41580109Z To follow progress, use 'tail -f /tmp/node-build.20250726061534.494.log' or pass --verbose
2025-07-26T06:15:34.513918506Z Downloading node-v20.10.0-linux-x64.tar.gz...
2025-07-26T06:15:33.180248951Z No wrangler.toml file found. Continuing.
2025-07-26T06:15:33.257141848Z Detected the following tools from environment: nodejs@20.10.0, pnpm@10.11.1
2025-07-26T06:15:33.257589384Z Installing nodejs 20.10.0
2025-07-26T06:15:34.319912303Z Trying to update node-build... ok
2025-07-26T06:15:34.41580109Z To follow progress, use 'tail -f /tmp/node-build.20250726061534.494.log' or pass --verbose
2025-07-26T06:15:34.513918506Z Downloading node-v20.10.0-linux-x64.tar.gz...
2025-07-26T06:15:34.75081893Z -> https://nodejs.org/dist/v20.10.0/node-v20.10.0-linux-x64.tar.gz
2025-07-26T06:15:36.444703328Z
2025-07-26T06:15:36.444903404Z WARNING: node-v20.10.0-linux-x64 is in LTS Maintenance mode and nearing its end of life.
2025-07-26T06:15:36.44499211Z It only receives *critical* security updates, *critical\* bug fixes and documentation updates.
2025-07-26T06:15:36.445094604Z
2025-07-26T06:15:36.445122789Z Installing node-v20.10.0-linux-x64...
2025-07-26T06:15:36.832293748Z Installed node-v20.10.0-linux-x64 to /opt/buildhome/.asdf/installs/nodejs/20.10.0
2025-07-26T06:15:36.832631808Z
2025-07-26T06:15:38.509692218Z
2025-07-26T06:15:38.509925623Z changed 1 package in 470ms
2025-07-26T06:15:38.518531044Z Reshimming asdf nodejs...
2025-07-26T06:15:42.091902229Z Preparing pnpm@10.11.1 for immediate activation...
2025-07-26T06:15:42.779622601Z ! Corepack is about to download https://registry.npmjs.org/pnpm/-/pnpm-10.12.4.tgz
2025-07-26T06:15:43.915827352Z Installing project dependencies: pnpm install
2025-07-26T06:15:44.529405585Z Lockfile is up to date, resolution step is skipped
2025-07-26T06:15:44.640397644Z Progress: resolved 1, reused 0, downloaded 0, added 0
2025-07-26T06:15:44.865836345Z Packages: +1305
2025-07-26T06:15:44.866064494Z ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
2025-07-26T06:15:45.694050373Z Progress: resolved 1305, reused 0, downloaded 89, added 71
2025-07-26T06:15:46.694473257Z Progress: resolved 1305, reused 0, downloaded 276, added 270
2025-07-26T06:15:47.695099247Z Progress: resolved 1305, reused 0, downloaded 348, added 313
2025-07-26T06:15:48.735995883Z Progress: resolved 1305, reused 0, downloaded 407, added 346
2025-07-26T06:15:49.736576299Z Progress: resolved 1305, reused 0, downloaded 546, added 501
2025-07-26T06:15:50.751385543Z Progress: resolved 1305, reused 0, downloaded 711, added 607
2025-07-26T06:15:51.751431333Z Progress: resolved 1305, reused 0, downloaded 857, added 733
2025-07-26T06:15:52.753612287Z Progress: resolved 1305, reused 0, downloaded 1026, added 890
2025-07-26T06:15:53.753654709Z Progress: resolved 1305, reused 0, downloaded 1288, added 1129
2025-07-26T06:15:54.339131437Z Progress: resolved 1305, reused 0, downloaded 1305, added 1305, done
2025-07-26T06:15:54.829026155Z
2025-07-26T06:15:54.829338537Z dependencies:
2025-07-26T06:15:54.829359868Z + @cloudflare/next-on-pages 1.13.12
2025-07-26T06:15:54.82941202Z + @dnd-kit/core 6.3.1
2025-07-26T06:15:54.829535868Z + @dnd-kit/modifiers 9.0.0
2025-07-26T06:15:54.829702079Z + @dnd-kit/sortable 10.0.0
2025-07-26T06:15:54.829944Z + @dnd-kit/utilities 3.2.2
2025-07-26T06:15:54.830076325Z + @headlessui/react 2.2.4
2025-07-26T06:15:54.830330817Z + @heroicons/react 2.2.0
2025-07-26T06:15:54.830345768Z + @upstash/redis 1.35.1
2025-07-26T06:15:54.830504874Z + @vidstack/react 1.12.13
2025-07-26T06:15:54.830947553Z + artplayer 5.2.3
2025-07-26T06:15:54.831221468Z + clsx 2.1.1
2025-07-26T06:15:54.831575638Z + critters 0.0.25
2025-07-26T06:15:54.83159756Z + framer-motion 12.18.1
2025-07-26T06:15:54.831679856Z + hls.js 1.6.6
2025-07-26T06:15:54.831836716Z + lucide-react 0.438.0
2025-07-26T06:15:54.831993384Z + media-icons 1.1.5
2025-07-26T06:15:54.832304897Z + next 14.2.30
2025-07-26T06:15:54.832422152Z + next-pwa 5.6.0
2025-07-26T06:15:54.832795642Z + next-themes 0.4.6
2025-07-26T06:15:54.833409875Z + react 18.3.1
2025-07-26T06:15:54.833665184Z + react-dom 18.3.1
2025-07-26T06:15:54.833737104Z + react-icons 5.5.0
2025-07-26T06:15:54.833967523Z + redis 4.7.1
2025-07-26T06:15:54.833982547Z + sweetalert2 11.22.2
2025-07-26T06:15:54.83407345Z + swiper 11.2.8
2025-07-26T06:15:54.834410124Z + tailwind-merge 2.6.0
2025-07-26T06:15:54.834544698Z + vidstack 0.6.15
2025-07-26T06:15:54.834663795Z + zod 3.25.67
2025-07-26T06:15:54.834785364Z
2025-07-26T06:15:54.834938345Z devDependencies:
2025-07-26T06:15:54.835069673Z + @commitlint/cli 16.3.0
2025-07-26T06:15:54.8351538Z + @commitlint/config-conventional 16.2.4
2025-07-26T06:15:54.835239939Z + @svgr/webpack 8.1.0
2025-07-26T06:15:54.835382993Z + @tailwindcss/forms 0.5.10
2025-07-26T06:15:54.835562001Z + @testing-library/jest-dom 5.17.0
2025-07-26T06:15:54.835572836Z + @testing-library/react 15.0.7
2025-07-26T06:15:54.83570841Z + @types/node 24.0.3
2025-07-26T06:15:54.835834359Z + @types/react 18.3.23
2025-07-26T06:15:54.835934624Z + @types/react-dom 19.1.6
2025-07-26T06:15:54.83604509Z + @types/testing-library\_\_jest-dom 5.14.9
2025-07-26T06:15:54.83617376Z + @typescript-eslint/eslint-plugin 5.62.0
2025-07-26T06:15:54.83633957Z + @typescript-eslint/parser 5.62.0
2025-07-26T06:15:54.836480947Z + autoprefixer 10.4.21
2025-07-26T06:15:54.836598023Z + eslint 8.57.1
2025-07-26T06:15:54.836745448Z + eslint-config-next 14.2.30
2025-07-26T06:15:54.836914676Z + eslint-config-prettier 8.10.0
2025-07-26T06:15:54.83694223Z + eslint-plugin-simple-import-sort 7.0.0
2025-07-26T06:15:54.837055632Z + eslint-plugin-unused-imports 2.0.0
2025-07-26T06:15:54.837184722Z + husky 7.0.4
2025-07-26T06:15:54.837327699Z + jest 27.5.1
2025-07-26T06:15:54.837368609Z + lint-staged 12.5.0
2025-07-26T06:15:54.837500864Z + next-router-mock 0.9.13
2025-07-26T06:15:54.837599003Z + postcss 8.5.6
2025-07-26T06:15:54.837820069Z + prettier 2.8.8
2025-07-26T06:15:54.837860347Z + prettier-plugin-tailwindcss 0.5.14
2025-07-26T06:15:54.837986182Z + tailwindcss 3.4.17
2025-07-26T06:15:54.838078365Z + typescript 4.9.5
2025-07-26T06:15:54.838256619Z
2025-07-26T06:15:54.838417621Z ╭ Warning ─────────────────────────────────────────────────────────────────────╮
2025-07-26T06:15:54.838657419Z │ │
2025-07-26T06:15:54.838728769Z │ Ignored build scripts: esbuild, sharp, unrs-resolver, workerd. │
2025-07-26T06:15:54.838838335Z │ Run "pnpm approve-builds" to pick which dependencies should be allowed │
2025-07-26T06:15:54.839020941Z │ to run scripts. │
2025-07-26T06:15:54.839057018Z │ │
2025-07-26T06:15:54.839203969Z ╰──────────────────────────────────────────────────────────────────────────────╯
2025-07-26T06:15:54.839321295Z
2025-07-26T06:15:54.853948375Z
2025-07-26T06:15:54.854086957Z > moontv@0.1.0 prepare /opt/buildhome/repo
2025-07-26T06:15:54.854215674Z > husky install
2025-07-26T06:15:54.854310307Z
2025-07-26T06:15:54.976151056Z husky - Git hooks installed
2025-07-26T06:15:55.04495006Z Done in 10.8s using pnpm v10.12.4
2025-07-26T06:15:55.108001062Z Executing user command: pnpm build:cf
2025-07-26T06:15:55.662428822Z
2025-07-26T06:15:55.662660602Z > moontv@0.1.0 build:cf /opt/buildhome/repo
2025-07-26T06:15:55.662805315Z > pnpm gen:runtime && pnpm gen:manifest && node scripts/build-cf.js && npx @cloudflare/next-on-pages
2025-07-26T06:15:55.66293525Z
2025-07-26T06:15:56.023413031Z
2025-07-26T06:15:56.023719658Z > moontv@0.1.0 gen:runtime /opt/buildhome/repo
2025-07-26T06:15:56.023806807Z > node scripts/convert-config.js
2025-07-26T06:15:56.023986017Z
2025-07-26T06:15:56.070491718Z 已生成 src/lib/runtime.ts
2025-07-26T06:15:56.448137658Z
2025-07-26T06:15:56.448252344Z > moontv@0.1.0 gen:manifest /opt/buildhome/repo
2025-07-26T06:15:56.448501181Z > node scripts/generate-manifest.js
2025-07-26T06:15:56.448517084Z
2025-07-26T06:15:56.495078966Z ✅ Generated manifest.json with site name: MoonTV
2025-07-26T06:15:56.551202908Z 🔧 添加 self polyfill 以支持 SSR...
2025-07-26T06:15:56.552136964Z 🚀 开始 Cloudflare Pages 构建...
2025-07-26T06:15:56.559084482Z /opt/buildhome/repo/scripts/build-cf.js:70
2025-07-26T06:15:56.559214364Z buildProcess.on('error', (error) => {
2025-07-26T06:15:56.559427327Z ^
2025-07-26T06:15:56.559549749Z
2025-07-26T06:15:56.559691736Z ReferenceError: buildProcess is not defined
2025-07-26T06:15:56.55984411Z at Object.<anonymous> (/opt/buildhome/repo/scripts/build-cf.js:70:1)
2025-07-26T06:15:56.559933051Z at Module.\_compile (node:internal/modules/cjs/loader:1376:14)
2025-07-26T06:15:56.560092212Z at Module.\_extensions..js (node:internal/modules/cjs/loader:1435:10)
2025-07-26T06:15:56.560320762Z at Module.load (node:internal/modules/cjs/loader:1207:32)
2025-07-26T06:15:56.560333826Z at Module.\_load (node:internal/modules/cjs/loader:1023:12)
2025-07-26T06:15:56.560376308Z at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:135:12)
2025-07-26T06:15:56.560726428Z at node:internal/main/run_main_module:28:49
2025-07-26T06:15:56.560757226Z
2025-07-26T06:15:56.560763262Z Node.js v20.10.0
2025-07-26T06:15:56.57928659Z  ELIFECYCLE  Command failed with exit code 1.
2025-07-26T06:15:56.610324965Z node:events:652
2025-07-26T06:15:56.610900946Z return this.listener.apply(this.target, arguments);
2025-07-26T06:15:56.610926388Z ^
2025-07-26T06:15:56.611098453Z
2025-07-26T06:15:56.611124396Z X [Error]: Error while executing user command. Exited with error code: 1
2025-07-26T06:15:56.611398143Z at ChildProcess.<anonymous> (/snapshot/dist/run-build.js)
2025-07-26T06:15:56.611411852Z at Object.onceWrapper (node:events:652:26)
2025-07-26T06:15:56.611418215Z at ChildProcess.emit (node:events:537:28)
2025-07-26T06:15:56.611527108Z at ChildProcess.\_handle.onexit (node:internal/child_process:291:12)
2025-07-26T06:15:56.611536011Z
2025-07-26T06:15:56.611541791Z Node.js v18.5.0
2025-07-26T06:15:58.27073958Z ⚠ No build cache found. Please configure build caching for faster rebuilds. Read more: https://nextjs.org/docs/messages/no-cache
2025-07-26T06:15:58.274958152Z Attention: Next.js now collects completely anonymous telemetry regarding usage.
2025-07-26T06:15:58.275339828Z This information is used to shape Next.js' roadmap and prioritize features.
2025-07-26T06:15:58.275366554Z You can learn more, including how to opt-out if you'd not like to participate in this anonymous program, by visiting the following URL:
2025-07-26T06:15:58.275494682Z https://nextjs.org/telemetry
2025-07-26T06:15:58.275663384Z
2025-07-26T06:15:58.325805764Z ▲ Next.js 14.2.30
2025-07-26T06:15:58.325948527Z - Experiments (use with caution):
2025-07-26T06:15:58.326431094Z · optimizeCss
2025-07-26T06:15:58.326913676Z · esmExternals
2025-07-26T06:15:58.326927457Z
2025-07-26T06:15:58.388022898Z Creating an optimized production build ...
2025-07-26T06:16:21.125224215Z ✓ Compiled successfully
2025-07-26T06:16:21.126554621Z Linting and checking validity of types ...
2025-07-26T06:16:29.576587089Z Collecting page data ...
2025-07-26T06:16:31.154953799Z Failed: build command exited with code: 1
2025-07-26T06:16:33.444092Z Failed: error occurred while running build command
